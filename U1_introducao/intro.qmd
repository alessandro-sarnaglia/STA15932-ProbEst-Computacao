---
title: "Probabilidade e Estat√≠stica"
subtitle: "Introdu√ß√£o e Estat√≠stica Descritiva"
author: "Prof. Dr. Alessandro JQ Sarnaglia"
lang: "pt"
format:
  revealjs:
    fig-width: 5.5
    fig-height: 5.5
    theme: [custom.scss]
    toc: true
    toc-depth: 2
    toc-expand: 2
    number-sections: true
    number-depth: 2
    menu:
      useTextContentForMissingTitles: false
editor: visual
filters:
  - parse-latex
---

# Programa e avalia√ß√µes

##  {.unnumbered .unlisted}

### Programa

::: incremental
1.  Introdu√ß√£o e estat√≠stica descritiva;
2.  Probabilidade de eventos;
3.  Vari√°veis aleat√≥rias;
4.  Infer√™ncia estat√≠stica.
:::

::: fragment
### Bibliografia

-   DEVORE, Jay L. Probabilidade e estat√≠stica: para engenharia e ci√™ncias. S√£o Paulo: Cengage Learning, 2012;
-   MORETTIN, Pedro Alberto; BUSSAB, Wilton de Oliveira. Estat√≠stica b√°sica. 8¬™ ed. S√£o Paulo: Saraiva, 2013.
:::

##  {.unnumbered .unlisted}

### Avalia√ß√µes

::: incremental
1.  Avalia√ß√£o 1 ‚üπ Unidades 1 e 2;
2.  Avalia√ß√£o 2 ‚üπ Unidade 3;
3.  Avalia√ß√£o 3 ‚üπ Unidade 4.
:::

::: fragment
[**Importante:** datas ser√£o definidas em conjunto com a turma.]{style="color:red;"}
:::

::: fragment
**Contatos e sala:**

-   üìß alessandro.sarnaglia\@ufes.br;
-   ‚òéÔ∏è (27) 4009-2822;
-   üñ•Ô∏è Sala 305 - Bloco B do IC1.
:::

# Introdu√ß√£o

## Contextualiza√ß√£o

**O que √© Estat√≠stica?** Campo da ci√™ncia que se dedica a coleta e an√°lise de dados.

**Import√¢ncia:** A Estat√≠stica √© particularmente interessante nas seguintes situa√ß√µes:

::: incremental
-   Descri√ß√£o de caracter√≠sticas importantes de qualquer tipo de vari√°vel;
-   Extra√ß√£o de informa√ß√µes/padr√µes em grande quantidade de dados;
-   Tomada de decis√µes em situa√ß√µes que apresentem varia√ß√£o/incerteza;
:::

##  {.unnumbered .unlisted}

### Exemplo

Uma tarefa √© executada v√°rias vezes em um mesmo computador e os tempos de execu√ß√£o s√£o registrados. Nesse caso, a Estat√≠stica pode ajudar a:

::: incremental
-   Avaliar um tempo t√≠pico que a tarefa leva para ser executada e mensurar a variabilidade das observa√ß√µes com respeito a esse valor;
-   Identificar poss√≠veis padr√µes sugeridos pela amostra;
-   Fazer afirma√ß√µes gerais sobre o fen√¥meno que d√° origem aos dados, a partir de uma amostra;
-   Realizar previs√µes com base em dados hist√≥ricos.
:::

##  {.unnumbered .unlisted}

### Exemplo - II

Veja abaixo 15 r√©plicas do tempo necess√°rio para ordenar $n$ observa√ß√µes, com: (esquerda) $n=100000$ fixo; (direita) $n=100000r$ para a r√©plica $r$.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#| label: fig-ex1
#| fig-width: 4.5
#| fig-asp: .8
#| fig-align: center
#| fig-cap: "Tempo de ordena√ß√£o de uma amostra"
#| fig-subcap: 
#|   - "$n$ fixo"
#|   - "$n$ crescente"
#| layout-ncol: 2
R <- 15; tpause <- 0
n1 <- rep(100000, R)
n2 <- 100000*(1:R)
t1 <- t2 <- NULL
for(i in 1:R){
  am1 <- runif(n1[i]); am2 <- runif(n2[i])
  Sys.sleep(tpause)
  t0_1 <- proc.time()[3]
  aux <- sort(am1)
  tf_1 <- proc.time()[3]
  Sys.sleep(tpause)
  t0_2 <- proc.time()[3]
  aux <- sort(am2)
  tf_2 <- proc.time()[3]
  t1[i] <- tf_1 - t0_1
  t2[i] <- tf_2 - t0_2
}
par(mar = c(3, 3, .5, .5))
plot(t1, pch=19, xlab='', ylab='', ylim=range(t1, t2))
mtext(text = 'R√©plica', side = 1, line = 2); mtext(text = 'Tempo', side = 2, line = 2)
plot(t2, pch=19, xlab='', ylab='', ylim=range(t1, t2))
mtext(text = 'R√©plica', side = 1, line = 2); mtext(text = 'Tempo', side = 2, line = 2)
```

##  {.unnumbered .unlisted}

### Exemplo - III

::: fragment
A [Fig @fig-ex1-1] nos mostra que:

::: incremental
-   o tempo de execu√ß√£o tende a apresentar valores em torno de uma quantidade fixa;
-   al√©m do valor de "tend√™ncia central", pode ser de interesse quantificar a variabilidade em torno desse valor.
:::
:::

::: fragment
J√° a [Fig @fig-ex1-2] sugere que:

::: incremental
-   n√£o h√° "estacionariedade", n√£o fazendo sentido falar em um √∫nico valor de tend√™ncia central!
-   aparentemente h√° comportamento linear, o que permitiria a previs√£o de valores n√£o observados.
:::
:::

## Processo estat√≠stico

![Ilustra√ß√£o do processo estat√≠stico](figs/etapas_est_estat.png){#fig-campos fig-align="center"}

# Estat√≠stica Descritiva

## Conceitos b√°sicos

**Popula√ß√£o:** √© o conjunto de todos indiv√≠duos (Unidades Experimentais - *UE*) que se tem interesse de investigar.

**Censo:** processo de observa√ß√£o de toda a popula√ß√£o;

Fatores que podem impedir a realiza√ß√£o de um censo:

::: incremental
-   Alto custo;
-   Demanda muito tempo;
-   Observa√ß√£o pode danificar os indiv√≠duos;
-   Popula√ß√£o de tamanho infinito ou desconhecido.
:::

## Conceitos b√°sicos - II {.unnumbered .unlisted}

Devido aos obst√°culos de se realizar um censo, uma alternativa consiste de observar uma parcela da popula√ß√£o.

. . .

**Amostra:** qualquer parcela de indiv√≠duos da popula√ß√£o.

. . .

[*Importante!*]{style="color:red;"} Para podermos extrapolar os resultados da amostra para a popula√ß√£o, necessitamos que a amostra seja [representativa]{.underline}, isto √©, que represente bem a popula√ß√£o.

. . .

**Amostragem:** campo de estudo de t√©cnicas de coleta de amostras representativas.

## Conceitos b√°sicos - III {.unnumbered .unlisted}

**Amostragem probabil√≠stica:** qualquer t√©cnica de sele√ß√£o amostral que garanta que as probabilidades de inclus√£o de cada elemento s√£o maiores que zero e conhecidas.

. . .

Conceitualmente, a **Amostragem Aleat√≥ria Simples** (AAS) √© o plano de amostragem probabil√≠stica mais b√°sico.

. . .

A AAS consiste da sele√ß√£o aleat√≥ria de $n$ (tamanho amostral) elementos uma lista de todos elementos da popula√ß√£o (*marco amostral*).

. . .

**Dificuldade:** em muitos casos, a obten√ß√£o do marco amostral √© invi√°vel.

## Conceitos b√°sicos - IV {.unnumbered .unlisted}

Em geral, n√£o h√° interesse nos indiv√≠duos em si, mas em caracter√≠sticas, num√©ricas ou n√£o dos mesmos.

::: fragment
**Vari√°vel:** caracter√≠stica num√©rica ou n√£o compartilhada por todos indiv√≠duos da popula√ß√£o.
:::

```{r fig}
```

::: columns
::: {.column width="40%"}
::: fragment
![](figs/variaveis.png){fig-align="center"}
:::
:::

::: {.column width="60%"}
::: fragment
As vari√°veis s√£o classificadas pelos valores que podem apresentar.

**Exemplo:** "Profiss√£o" e "Renda" apresentam valores de ess√™ncia completamente diferentes.
:::
:::
:::

## Tipos de vari√°veis

A classifica√ß√£o de vari√°veis √© muito importante, pois auxilia na escolha dos m√©todos de Estat√≠stica Descritiva apropriados.

. . .

Por exemplo, n√£o faz sentido falar em soma e produto de vari√°veis n√£o num√©ricas. Assim, medidas como a m√©dia n√£o podem ser calculadas para esse tipo de vari√°veis.

. . .

Vejamos as defini√ß√µes dos diferentes tipos de vari√°veis.

## Tipos de vari√°veis - II {.unnumbered .unlisted}

### Vari√°veis qualitativas (ou categ√≥ricas)

Apresentam valores [n√£o num√©ricos]{.underline} (tamb√©m chamadas de categorias). Se dividem em:

::: incremental
-   Ordinais ‚üπ quando os poss√≠veis categorias admitem algum tipo de ordena√ß√£o;
-   Nominais ‚üπ quando n√£o h√° uma estrutura de ordena√ß√£o natural das categorias.
:::

## Tipos de vari√°veis - III {.unnumbered .unlisted}

### Vari√°veis quantitativas (ou num√©ricas)

Apresentam valores [num√©ricos]{.underline}. Se dividem em:

::: incremental
-   Discretas ‚üπ quando os poss√≠veis valores formam um conjunto [enumer√°vel]{.underline};
-   Cont√≠nuas ‚üπ quando os poss√≠veis valores formam um conjunto [n√£o enumer√°vel]{.underline};
:::

##  {.unnumbered .unlisted .smaller}

**Exemplo:** Uma compara√ß√£o de algoritmos para ordena√ß√£o de um conjunto de dados produziu o seguinte banco de dados:

```{=latex}
\begin{table}\centering
\begin{tabular}{cccc}
Algoritmo & Tamanho Amostral & N√∫cleos & Tempo \\ \hline
 A         & Pequeno $(n = 10^2)$ & 4       & $<\text{0,01}$ \\
 B         & Pequeno $(n = 10^2)$ & 4       & $\text{0,01}$  \\
 A         & Interm. $(n = 10^3)$ & 4       & $<\text{0,01}$ \\
 B         & Interm. $(n = 10^3)$ & 4       & $\text{0,79}$  \\
 A         & Grande $(n = 10^4)$  & 4       & $<\text{0,01}$ \\
 B         & Grande $(n = 10^4)$  & 4       & $\text{51,00}$ \\
 A         & Pequeno $(n = 10^2)$ & 8       & $<\text{0,01}$ \\
 B         & Pequeno $(n = 10^2)$ & 8       & $<\text{0,01}$ \\
\end{tabular}
\end{table}
```
::: fragment
Tipos das vari√°veis: Algoritmo (nominal); Tamanho amostral (ordinal ou discreta); N√∫cleos (discreta); e Tempo (cont√≠nua).
:::

## Distribui√ß√µes de frequ√™ncias

Muitas vezes, a quantidade de dados faz com que seja dif√≠cil enxergar comportamentos/padr√µes dos mesmos.

. . .

Uma ferramenta muito √∫til √© a distribui√ß√£o de frequ√™ncias.

. . .

A distribui√ß√£o de frequ√™ncias:

::: incremental
-   associa os valores da vari√°vel com a frequ√™ncia com que foram observados na amostra;
-   permite evidenciar quais valores ocorrem com maior (ou menor) frequ√™ncia;
-   evidencia caracter√≠sticas da vari√°vel como: simetria; multimodalidade; etc.
:::

##  {.unnumbered .unlisted .smaller}

### Distribui√ß√£o de frequ√™ncia absoluta

::: panel-tabset
## Defini√ß√£o

Seja $x_1\ldots, x_n$ uma amostra de tamanho $n$ de uma vari√°vel $X$. Sejam $x_1^*, \ldots, x_k^*$ os $k$ valores distintos da amostra, onde, normalmente $k\leq n$.

**Frequ√™ncia (absoluta):** √© o n√∫mero de repeti√ß√µes $n_i$ apresentado pelo valor $x_i^*$ na amostra, com $i = 1, \ldots, k$.

::: columns
::: {.column width="65%"}
A distribui√ß√£o de frequ√™ncias absoluta de $X$ √© definida pela tabela ao lado.

::: fragment
Quando poss√≠vel, os valores distintos devem ser apresentados em ordem crescente, isto √©, $x_1^* \leq \ldots \leq x_k^*$.
:::
:::

::: {.column width="35%"}
::: table-with-total-row
```{=latex}
\begin{table}\centering
\begin{tabular}{cc}
Vari√°vel       & Frequ√™ncia   \\ \hline
$x_1^*$        &$n_1$         \\
$\vdots$       &$\vdots$      \\
$x_k^*$        &$n_k$         \\
\textbf{Total} & $\sum_in_i$  \\
\end{tabular}
\end{table}
```
:::
:::
:::

## Exemplo - Dados

```{r}
library(dplyr)
library(knitr)
library(kableExtra)
library(DT)
dia_util <- c(rep("Sim", 50), rep("N√£o", 20))
media <- 5*as.numeric(dia_util=='Sim') + 1*as.numeric(dia_util=='N√£o')
atendimentos <- rpois(n = length(media), lambda = media)
df <- data.frame("Dia √ötil" = dia_util, "Atendimentos" = atendimentos)
df %>%
  datatable(colnames = c("Dia √ötil", "Atendimentos"), rownames = FALSE, class = 'nowrap',
            options = list(lengthChange=FALSE, pageLength=5,
                           language=list(url='//cdn.datatables.net/plug-ins/2.0.2/i18n/pt-BR.json')))
```

## Exemplo - Distribui√ß√£o

```{r}
kable(data.frame(names(table(df[,1])), as.numeric(table(df[,1]))),
      row.names = F, col.names=c('Dia √ötil', 'Frequ√™ncia'))
```

::: fragment

<p></p>

```{r, render=TRUE}
library(xtable)
library(gt)
library(gtsummary)
df0 <- data.frame(Frequencia = 'Frequ√™ncia', Atendimentos = df$Atendimentos)
tbl <- tbl_summary(data = df0, by = Atendimentos, missing = "no",
                   label = list(Atendimentos ~ "Atendimentos"),
                   statistic = all_categorical() ~ "{n}",
                   type = list(Atendimentos ~ "categorical"))
tbl <- modify_header(x = tbl, label ~ "**Atendimentos**", all_stat_cols() ~ "**{level}**")
tbl <- modify_table_styling(tbl, columns = everything(), text_format = "indent",
                            undo_text_format = TRUE)
tbl <- modify_table_styling(tbl, columns = everything(), align = "center")
tbl <- modify_footnote(tbl, all_stat_cols() ~ NA)
# tbl <- modify_spanning_header(tbl, all_stat_cols() ~ "**Atendimentos**")
tbl <- remove_row_type(tbl, Frequencia, type = "header")
# # show_header_names(tbl)
tbl %>% bold_levels() %>% bold_labels() %>% as_gt() %>%
  tab_options(table.font.size = "100%", table.border.top.color="#000000",
              table.border.bottom.color = "#000000",
              table.border.top.width = "1px",
              table.border.bottom.width = "1px",
              column_labels.border.top.color="#000000",
              column_labels.border.bottom.color="#000000",
              column_labels.border.top.width = "1px",
              column_labels.border.bottom.width = "1px",
              row_group.border.top.color = "#000000",
              row_group.border.bottom.color = "#000000",
              row_group.border.top.width = "1px",
              row_group.border.bottom.width = "1px",
              table_body.border.top.color = "#000000",
              table_body.border.bottom.color = "#000000",
              table_body.border.top.width = "1px",
              table_body.border.bottom.width = "1px",
              summary_row.border.color = "#000000",
              summary_row.border.width = "1px",
              table_body.hlines.color = "#000000",
              table_body.hlines.width = "1px") %>%
  cols_width(label ~ px(180), all_stat_cols() ~ px(50))
```

:::

::: fragment

<p></p>

```{r, render=TRUE}
library(xtable)
library(gt)
library(gtsummary)
tbl <- tbl_summary(data = df, by = Atendimentos, missing = "no",
                   label = list(Dia.√ötil ~ "", Atendimentos ~ "Atendimentos"),
                   statistic = all_categorical() ~ "{n}",
                   type = list(Dia.√ötil ~ "categorical", Atendimentos ~ "categorical"))
tbl <- modify_header(x = tbl, label = "**Dia √ötil**", all_stat_cols() ~ "**{level}**")
tbl <- modify_table_styling(tbl, columns = everything(), text_format = "indent",
                            undo_text_format = TRUE)
tbl <- modify_table_styling(tbl, columns = everything(), align = "center")
tbl <- modify_footnote(tbl, all_stat_cols() ~ NA)
tbl <- modify_spanning_header(tbl, all_stat_cols() ~ "**Atendimentos**")
tbl <- remove_row_type(tbl, Dia.√ötil, type = "header")
# show_header_names(tbl)
tbl %>% bold_levels() %>% bold_labels() %>% as_gt() %>%
  tab_options(table.font.size = "100%", table.border.top.color="#000000",
              table.border.bottom.color = "#000000",
              table.border.top.width = "1px",
              table.border.bottom.width = "1px",
              column_labels.border.top.color="#000000",
              column_labels.border.bottom.color="#000000",
              column_labels.border.top.width = "1px",
              column_labels.border.bottom.width = "1px",
              row_group.border.top.color = "#000000",
              row_group.border.bottom.color = "#000000",
              row_group.border.top.width = "1px",
              row_group.border.bottom.width = "1px",
              table_body.border.top.color = "#000000",
              table_body.border.bottom.color = "#000000",
              table_body.border.top.width = "1px",
              table_body.border.bottom.width = "1px",
              summary_row.border.color = "#000000",
              summary_row.border.width = "1px",
              table_body.hlines.color = "#000000",
              table_body.hlines.width = "1px") %>%
  cols_width(label ~ px(130), all_stat_cols() ~ px(50))
```
:::

:::

## M√©dia e Vari√¢ncia
